/*UNPKG
opus-encdec (A.K.A. Recorder)
Version: 
0.1.1
A JavaScript library for encoding and decoding OPUS audio

opus-encdec / dist / libopus-encoder.wasm.js*/

// https://github.com/mmig/opus-encdec/blob/master/LICENSE.md

var Module=void 0!==Module?Module:{};!function(e,n,t){var r,o;"function"==typeof define&&define.amd?define(["require"],(function(t){return r=n(e,t)})):"object"==typeof module&&module.exports?(o="undefined"!=typeof process&&process&&process.env?process.env:e,r=n(o,module.require),module.exports=r):(r=n(e),e.OpusEncoderLib=r)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,(function(e,n){"use strict";var t={isReady:!1,onready:null,onRuntimeInitialized:function(){t.isReady=!0,t.onready&&setTimeout(t.onready,0)}};e&&e.OPUS_SCRIPT_LOCATION&&(t.locateFile=function(n){var t=e.OPUS_SCRIPT_LOCATION||"";return t[n]?t[n]:(t+=t&&!/\/$/.test(t)?"/":"")+n});var r,o={};for(r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);var i,s,a=[],u=!1,f=!1;u="object"==typeof window,f="function"==typeof importScripts,i="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,s=!u&&!i&&!f;var c,p,l,d,m="";i?(m=f?n("path").dirname(m)+"/":__dirname+"/",c=function(e,t){return l||(l=n("fs")),d||(d=n("path")),e=d.normalize(e),l.readFileSync(e,t?null:"utf8")},p=function(e){var n=c(e,!0);return n.buffer||(n=new Uint8Array(n)),w(n.buffer),n},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),a=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=t),process.on("uncaughtException",(function(e){if(!(e instanceof G))throw e})),process.on("unhandledRejection",U),function(e){process.exit(e)},t.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(c=function(e){return read(e)}),p=function(e){var n;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(w("object"==typeof(n=read(e,"binary"))),n)},"undefined"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),"function"==typeof quit&&function(e){quit(e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||f)&&(f?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",c=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},f&&(p=function(e){var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),function(e,n,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?n(r.response):t()},r.onerror=t,r.send(null)});var y=t.print||console.log.bind(console),_=t.printErr||console.warn.bind(console);for(r in o)o.hasOwnProperty(r)&&(t[r]=o[r]);o=null,t.arguments&&(a=t.arguments),t.thisProgram&&t.thisProgram,t.quit&&t.quit;var v;t.wasmBinary&&(v=t.wasmBinary);var h;t.noExitRuntime;"object"!=typeof WebAssembly&&U("no native wasm support detected");var g=!1;function w(e,n){e||U("Assertion failed: "+n)}var b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(e,n,t){for(var r=n+t,o=n;e[o]&&!(o>=r);)++o;if(o-n>16&&e.subarray&&b)return b.decode(e.subarray(n,o));for(var i="";n<o;){var s=e[n++];if(128&s){var a=63&e[n++];if(192!=(224&s)){var u=63&e[n++];if((s=224==(240&s)?(15&s)<<12|a<<6|u:(7&s)<<18|a<<12|u<<6|63&e[n++])<65536)i+=String.fromCharCode(s);else{var f=s-65536;i+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else i+=String.fromCharCode((31&s)<<6|a)}else i+=String.fromCharCode(s)}return i}function A(e,n){return e?R(I,e,n):""}var I,x;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");t.INITIAL_MEMORY;var E,S=[],T=[],O=[],M=[];T.push({func:function(){B()}});var P=0,C=null,H=null;function U(e){throw t.onAbort&&t.onAbort(e),_(e+=""),g=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function j(e,n){return String.prototype.startsWith?e.startsWith(n):0===e.indexOf(n)}t.preloadedImages={},t.preloadedAudios={};var L,W="libopus-encoder.wasm.wasm";function k(e){try{if(e==W&&v)return new Uint8Array(v);if(p)return p(e);throw"sync fetching of the wasm failed: you can preload it to Module['wasmBinary'] manually, or emcc.py will do that for you when generating HTML (but not JS)"}catch(e){U(e)}}function q(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?E.get(r)():E.get(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}j(W,"data:application/octet-stream;base64,")||(L=W,W=t.locateFile?t.locateFile(L,m):m+L);var D={mappings:{},buffers:[null,[],[]],printChar:function(e,n){var t=D.buffers[e];0===n||10===n?((1===e?y:_)(R(t,0)),t.length=0):t.push(n)},varargs:void 0,get:function(){return D.varargs+=4,x[D.varargs-4>>2]},getStr:function(e){return A(e)},get64:function(e,n){return e}};var F,z={abort:function(){U()},emscripten_memcpy_big:function(e,n,t){I.copyWithin(e,n,n+t)},emscripten_resize_heap:function(e){U("OOM")},fd_close:function(e){return 0},fd_seek:function(e,n,t,r,o){},fd_write:function(e,n,t,r){for(var o=0,i=0;i<t;i++){for(var s=x[n+8*i>>2],a=x[n+(8*i+4)>>2],u=0;u<a;u++)D.printChar(e,I[s+u]);o+=a}return x[r>>2]=o,0},setTempRet0:function(e){0|e}},N=function(){var e={env:z,wasi_snapshot_preview1:z};function n(e,n){var r,o=e.exports;t.asm=o,h=t.asm.memory,r=h.buffer,r,t.HEAP8=new Int8Array(r),t.HEAP16=new Int16Array(r),t.HEAP32=x=new Int32Array(r),t.HEAPU8=I=new Uint8Array(r),t.HEAPU16=new Uint16Array(r),t.HEAPU32=new Uint32Array(r),t.HEAPF32=new Float32Array(r),t.HEAPF64=new Float64Array(r),E=t.asm.__indirect_function_table,function(e){if(P--,t.monitorRunDependencies&&t.monitorRunDependencies(P),0==P&&(null!==C&&(clearInterval(C),C=null),H)){var n=H;H=null,n()}}()}if(P++,t.monitorRunDependencies&&t.monitorRunDependencies(P),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}var r=function(e,n){var t,r,o;try{o=k(e),r=new WebAssembly.Module(o),t=new WebAssembly.Instance(r,n)}catch(e){var i=e.toString();throw _("failed to compile wasm module: "+i),(i.indexOf("imported Memory")>=0||i.indexOf("memory import")>=0)&&_("Memory size incompatibility issues may be due to changing INITIAL_MEMORY at runtime to something too large. Use ALLOW_MEMORY_GROWTH to allow any size memory (and also make sure not to set INITIAL_MEMORY at runtime to something smaller than it was at compile time)."),e}return[t,r]}(W,e);return n(r[0],r[1]),t.asm}(),B=t.___wasm_call_ctors=N.__wasm_call_ctors;t._opus_encoder_create=N.opus_encoder_create,t._opus_encode_float=N.opus_encode_float,t._opus_encoder_ctl=N.opus_encoder_ctl,t._opus_encoder_destroy=N.opus_encoder_destroy,t._speex_resampler_init=N.speex_resampler_init,t._speex_resampler_destroy=N.speex_resampler_destroy,t._speex_resampler_process_interleaved_float=N.speex_resampler_process_interleaved_float,t.___errno_location=N.__errno_location,t.stackSave=N.stackSave,t.stackRestore=N.stackRestore,t.stackAlloc=N.stackAlloc,t._malloc=N.malloc,t._free=N.free,t.dynCall_jiji=N.dynCall_jiji;function G(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Y(e){function n(){F||(F=!0,t.calledRun=!0,g||(!0,q(T),q(O),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),M.unshift(e);var e;q(M)}()))}e=e||a,P>0||(!function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),S.unshift(e);var e;q(S)}(),P>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n()))}if(H=function e(){F||Y(),F||(H=e)},t.run=Y,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Y(),t}));
